{"ast":null,"code":"var _jsxFileName = \"/Users/sajedhussein/Documents/btecc_code/Frontend/demo-project updated/src/Components/ScheduleRepair.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { Button, Modal, Form, Input, DatePicker, message } from 'antd';\nimport axios from 'axios';\nimport moment from 'moment';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ScheduleRepair = () => {\n  _s();\n  const [isModalVisible, setIsModalVisible] = useState(false);\n  const [form] = Form.useForm();\n\n  // Function to show the modal\n  const showModal = () => {\n    setIsModalVisible(true);\n  };\n\n  // Function to handle modal cancel\n  const handleCancel = () => {\n    setIsModalVisible(false);\n    form.resetFields(); // Reset form fields when modal is closed\n  };\n\n  // Function to handle form submission and post to the backend\n  const onFinish = async values => {\n    try {\n      console.log('Form Values:', values);\n\n      // Ensure property names match backend expectations (case-sensitive)\n      const repairData = {\n        Title: values.title,\n        Description: values.description,\n        RepairDate: values.repairDate.toISOString() // Use ISO string format\n        // Status is not included; it will default to 'Pending' in the backend\n      };\n      console.log('Formatted Repair Data:', repairData);\n      const account = JSON.parse(localStorage.getItem('account') || '{}');\n      if (!account || !account.token) {\n        message.error('Authorization token is missing. Please log in.');\n        return;\n      }\n      console.log('Making API Request...');\n\n      // Send POST request to backend\n      const response = await axios.post('http://localhost:5235/api/ScheduledRepairs/schedule', repairData, {\n        headers: {\n          Authorization: `Bearer ${account.token}`\n        }\n      });\n      console.log('Backend Response:', response.data);\n      message.success('Repair scheduled successfully!');\n      setIsModalVisible(false);\n      form.resetFields();\n    } catch (error) {\n      console.error('Error scheduling repair:', error);\n      if (error.response && error.response.data) {\n        console.error('Error Response Data:', error.response.data);\n        message.error(`Failed to schedule repair: ${error.response.data}`);\n      } else if (error.request) {\n        console.error('Error Request:', error.request);\n        message.error('No response received from the server.');\n      } else {\n        console.error('Error Message:', error.message);\n        message.error(`Error: ${error.message}`);\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Button, {\n      type: \"primary\",\n      onClick: showModal,\n      style: {\n        marginTop: '10px'\n      },\n      children: \"Schedule Now\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      title: \"Schedule Repair Appointment\",\n      open: isModalVisible // Use 'open' instead of 'visible'\n      ,\n      onCancel: handleCancel,\n      footer: null // Remove default footer buttons\n      ,\n      destroyOnClose: true // Ensure the modal state is destroyed after closing\n      ,\n      children: /*#__PURE__*/_jsxDEV(Form, {\n        form: form,\n        layout: \"vertical\",\n        onFinish: onFinish,\n        initialValues: {\n          repairDate: moment() // Default date to today\n        },\n        children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"Title\",\n          name: \"title\",\n          rules: [{\n            required: true,\n            message: 'Please input the title!'\n          }],\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            placeholder: \"Enter the title\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"Description\",\n          name: \"description\",\n          rules: [{\n            required: true,\n            message: 'Please input the description!'\n          }],\n          children: /*#__PURE__*/_jsxDEV(Input.TextArea, {\n            placeholder: \"Enter a brief description\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          label: \"Select Date and Time\",\n          name: \"repairDate\" // Ensure this matches 'repairDate' in onFinish\n          ,\n          rules: [{\n            required: true,\n            message: 'Please select date and time!'\n          }],\n          children: /*#__PURE__*/_jsxDEV(DatePicker, {\n            showTime: true,\n            format: \"YYYY-MM-DD HH:mm:ss\",\n            style: {\n              width: '100%'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            type: \"primary\",\n            htmlType: \"submit\",\n            block: true,\n            children: \"Submit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(ScheduleRepair, \"6bjsG0RjRxniBaT7pyWiA4V8XKA=\", false, function () {\n  return [Form.useForm];\n});\n_c = ScheduleRepair;\nexport default ScheduleRepair;\nvar _c;\n$RefreshReg$(_c, \"ScheduleRepair\");","map":{"version":3,"names":["React","useState","Button","Modal","Form","Input","DatePicker","message","axios","moment","jsxDEV","_jsxDEV","Fragment","_Fragment","ScheduleRepair","_s","isModalVisible","setIsModalVisible","form","useForm","showModal","handleCancel","resetFields","onFinish","values","console","log","repairData","Title","title","Description","description","RepairDate","repairDate","toISOString","account","JSON","parse","localStorage","getItem","token","error","response","post","headers","Authorization","data","success","request","children","type","onClick","style","marginTop","fileName","_jsxFileName","lineNumber","columnNumber","open","onCancel","footer","destroyOnClose","layout","initialValues","Item","label","name","rules","required","placeholder","TextArea","showTime","format","width","htmlType","block","_c","$RefreshReg$"],"sources":["/Users/sajedhussein/Documents/btecc_code/Frontend/demo-project updated/src/Components/ScheduleRepair.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Button, Modal, Form, Input, DatePicker, message } from 'antd';\nimport axios from 'axios';\nimport moment from 'moment';\n\nconst ScheduleRepair = () => {\n  const [isModalVisible, setIsModalVisible] = useState(false);\n  const [form] = Form.useForm();\n\n  // Function to show the modal\n  const showModal = () => {\n    setIsModalVisible(true);\n  };\n\n  // Function to handle modal cancel\n  const handleCancel = () => {\n    setIsModalVisible(false);\n    form.resetFields(); // Reset form fields when modal is closed\n  };\n\n  // Function to handle form submission and post to the backend\n  const onFinish = async (values) => {\n    try {\n      console.log('Form Values:', values);\n\n      // Ensure property names match backend expectations (case-sensitive)\n      const repairData = {\n        Title: values.title,\n        Description: values.description,\n        RepairDate: values.repairDate.toISOString(), // Use ISO string format\n        // Status is not included; it will default to 'Pending' in the backend\n      };\n\n      console.log('Formatted Repair Data:', repairData);\n\n      const account = JSON.parse(localStorage.getItem('account') || '{}');\n      if (!account || !account.token) {\n        message.error('Authorization token is missing. Please log in.');\n        return;\n      }\n\n      console.log('Making API Request...');\n\n      // Send POST request to backend\n      const response = await axios.post(\n        'http://localhost:5235/api/ScheduledRepairs/schedule',\n        repairData,\n        {\n          headers: {\n            Authorization: `Bearer ${account.token}`,\n          },\n        }\n      );\n\n      console.log('Backend Response:', response.data);\n      message.success('Repair scheduled successfully!');\n      setIsModalVisible(false);\n      form.resetFields();\n    } catch (error) {\n      console.error('Error scheduling repair:', error);\n      if (error.response && error.response.data) {\n        console.error('Error Response Data:', error.response.data);\n        message.error(`Failed to schedule repair: ${error.response.data}`);\n      } else if (error.request) {\n        console.error('Error Request:', error.request);\n        message.error('No response received from the server.');\n      } else {\n        console.error('Error Message:', error.message);\n        message.error(`Error: ${error.message}`);\n      }\n    }\n  };\n\n  return (\n    <>\n      <Button type=\"primary\" onClick={showModal} style={{ marginTop: '10px' }}>\n        Schedule Now\n      </Button>\n\n      {/* Modal for scheduling repair */}\n      <Modal\n        title=\"Schedule Repair Appointment\"\n        open={isModalVisible} // Use 'open' instead of 'visible'\n        onCancel={handleCancel}\n        footer={null} // Remove default footer buttons\n        destroyOnClose={true} // Ensure the modal state is destroyed after closing\n      >\n        <Form\n          form={form}\n          layout=\"vertical\"\n          onFinish={onFinish}\n          initialValues={{\n            repairDate: moment(), // Default date to today\n          }}\n        >\n          <Form.Item\n            label=\"Title\"\n            name=\"title\"\n            rules={[{ required: true, message: 'Please input the title!' }]}\n          >\n            <Input placeholder=\"Enter the title\" />\n          </Form.Item>\n\n          <Form.Item\n            label=\"Description\"\n            name=\"description\"\n            rules={[{ required: true, message: 'Please input the description!' }]}\n          >\n            <Input.TextArea placeholder=\"Enter a brief description\" />\n          </Form.Item>\n\n          <Form.Item\n            label=\"Select Date and Time\"\n            name=\"repairDate\" // Ensure this matches 'repairDate' in onFinish\n            rules={[{ required: true, message: 'Please select date and time!' }]}\n          >\n            <DatePicker\n              showTime\n              format=\"YYYY-MM-DD HH:mm:ss\"\n              style={{ width: '100%' }}\n            />\n          </Form.Item>\n\n          <Form.Item>\n            <Button type=\"primary\" htmlType=\"submit\" block>\n              Submit\n            </Button>\n          </Form.Item>\n        </Form>\n      </Modal>\n    </>\n  );\n};\n\nexport default ScheduleRepair;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}