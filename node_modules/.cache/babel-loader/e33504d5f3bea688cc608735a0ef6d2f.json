{"ast":null,"code":"var _jsxFileName = \"/Users/sajedhussein/Documents/btecc_code/Frontend/demo-project updated/src/Components/login.js\";\nimport React from \"react\";\nimport axios from \"axios\";\nimport { Button, Form, Input, Card } from \"antd\";\nimport { useNavigate } from \"react-router-dom\";\nimport { decodeToken } from \"react-jwt\";\nimport Swal from \"sweetalert2\";\nimport { Link } from \"react-router-dom\";\nconst Login = ({\n  setLoggedIn,\n  setRole\n}) => {\n  const navigate = useNavigate();\n  const onFinish = async values => {\n    try {\n      // Send login request to the API\n      const {\n        data\n      } = await axios.post(\"http://localhost:5235/api/Users/Login\", {\n        username: values.username,\n        password: values.password\n      });\n\n      // Decode the JWT token to retrieve user details\n      const myDecodedToken = decodeToken(data.token);\n\n      // Store user role and account details in local storage\n      localStorage.setItem(\"role\", myDecodedToken[\"http://schemas.microsoft.com/ws/2008/06/identity/claims/role\"]);\n      localStorage.setItem(\"account\", JSON.stringify(data));\n\n      // Update the state to reflect the new login status\n      setLoggedIn(true);\n      setRole(myDecodedToken[\"http://schemas.microsoft.com/ws/2008/06/identity/claims/role\"]);\n\n      // Redirect the user to the dashboard\n      navigate(\"/dashboard\"); // Redirect to dashboard upon successful login\n    } catch (e) {\n      Swal.fire({\n        icon: \"error\",\n        title: \"Invalid Credentials\",\n        text: \"Please check your username or password\",\n        color: \"red\",\n        width: 400\n      });\n    }\n  };\n  const onFinishFailed = errorInfo => {\n    console.error(\"Failed:\", errorInfo);\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    style: styles.card,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    style: styles.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  }, \"Login\"), /*#__PURE__*/React.createElement(Form, {\n    name: \"loginForm\",\n    onFinish: onFinish,\n    onFinishFailed: onFinishFailed,\n    autoComplete: \"off\",\n    layout: \"vertical\",\n    style: styles.form,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    label: \"Username\",\n    name: \"username\",\n    rules: [{\n      required: true,\n      message: \"Please input your username!\"\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    placeholder: \"Enter your username\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Form.Item, {\n    label: \"Password\",\n    name: \"password\",\n    rules: [{\n      required: true,\n      message: \"Please input your password!\"\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Input.Password, {\n    placeholder: \"Enter your password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Form.Item, {\n    style: {\n      textAlign: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"primary\",\n    htmlType: \"submit\",\n    style: styles.submitButton,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }\n  }, \"Submit\"), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      textAlign: \"center\",\n      marginTop: \"10px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 17\n    }\n  }, \"Don't have an account? \"), /*#__PURE__*/React.createElement(Link, {\n    to: \"/register\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 17\n    }\n  }, \"Register here\"))))));\n};\nconst styles = {\n  container: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    height: \"100vh\",\n    justifyContent: \"center\",\n    background: \"radial-gradient(circle, rgba(163,163,163,1) 100%, rgba(230,230,230,1) 100%, rgba(168,191,197,1) 100%, rgba(32,25,56,1) 100%, rgba(0,255,239,1) 100%)\"\n  },\n  card: {\n    width: \"30%\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    padding: \"20px\",\n    boxShadow: \"0 4px 8px rgba(0, 0, 0, 0.1)\",\n    borderRadius: \"8px\"\n  },\n  title: {\n    textAlign: \"center\",\n    marginBottom: \"30px\",\n    fontWeight: \"bold\",\n    fontSize: \"24px\"\n  },\n  form: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    justifyContent: \"center\"\n  },\n  submitButton: {\n    width: \"100px\"\n  }\n};\nexport default Login;","map":{"version":3,"names":["React","axios","Button","Form","Input","Card","useNavigate","decodeToken","Swal","Link","Login","setLoggedIn","setRole","navigate","onFinish","values","data","post","username","password","myDecodedToken","token","localStorage","setItem","JSON","stringify","e","fire","icon","title","text","color","width","onFinishFailed","errorInfo","console","error","createElement","style","styles","container","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","card","name","autoComplete","layout","form","Item","label","rules","required","message","placeholder","Password","textAlign","type","htmlType","submitButton","marginTop","to","display","flexDirection","alignItems","height","justifyContent","background","padding","boxShadow","borderRadius","marginBottom","fontWeight","fontSize"],"sources":["/Users/sajedhussein/Documents/btecc_code/Frontend/demo-project updated/src/Components/login.js"],"sourcesContent":["import React from \"react\";\r\nimport axios from \"axios\";\r\nimport { Button, Form, Input, Card } from \"antd\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { decodeToken } from \"react-jwt\";\r\nimport Swal from \"sweetalert2\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst Login = ({ setLoggedIn, setRole }) => {\r\n  const navigate = useNavigate();\r\n\r\n  const onFinish = async (values) => {\r\n    try {\r\n      // Send login request to the API\r\n      const { data } = await axios.post(\"http://localhost:5235/api/Users/Login\", {\r\n        username: values.username,\r\n        password: values.password,\r\n      });\r\n\r\n      // Decode the JWT token to retrieve user details\r\n      const myDecodedToken = decodeToken(data.token);\r\n\r\n      // Store user role and account details in local storage\r\n      localStorage.setItem(\r\n        \"role\",\r\n        myDecodedToken[\"http://schemas.microsoft.com/ws/2008/06/identity/claims/role\"]\r\n      );\r\n      localStorage.setItem(\"account\", JSON.stringify(data));\r\n\r\n      // Update the state to reflect the new login status\r\n      setLoggedIn(true);\r\n      setRole(myDecodedToken[\"http://schemas.microsoft.com/ws/2008/06/identity/claims/role\"]);\r\n\r\n      // Redirect the user to the dashboard\r\n      navigate(\"/dashboard\");  // Redirect to dashboard upon successful login\r\n    } catch (e) {\r\n      Swal.fire({\r\n        icon: \"error\",\r\n        title: \"Invalid Credentials\",\r\n        text: \"Please check your username or password\",\r\n        color: \"red\",\r\n        width: 400,\r\n      });\r\n    }\r\n  };\r\n\r\n  const onFinishFailed = (errorInfo) => {\r\n    console.error(\"Failed:\", errorInfo);\r\n  };\r\n\r\n  return (\r\n    <div style={styles.container}>\r\n      <Card style={styles.card}>\r\n        <h1 style={styles.title}>Login</h1>\r\n\r\n        <Form\r\n          name=\"loginForm\"\r\n          onFinish={onFinish}\r\n          onFinishFailed={onFinishFailed}\r\n          autoComplete=\"off\"\r\n          layout=\"vertical\"\r\n          style={styles.form}\r\n        >\r\n          <Form.Item\r\n            label=\"Username\"\r\n            name=\"username\"\r\n            rules={[{ required: true, message: \"Please input your username!\" }]}\r\n          >\r\n            <Input placeholder=\"Enter your username\" />\r\n          </Form.Item>\r\n\r\n          <Form.Item\r\n            label=\"Password\"\r\n            name=\"password\"\r\n            rules={[{ required: true, message: \"Please input your password!\" }]}\r\n          >\r\n            <Input.Password placeholder=\"Enter your password\" />\r\n          </Form.Item>\r\n\r\n          <Form.Item style={{ textAlign: \"center\" }}>\r\n            <Button type=\"primary\" htmlType=\"submit\" style={styles.submitButton}>\r\n              Submit\r\n            </Button>\r\n            <div style={{ textAlign: \"center\", marginTop: \"10px\" }}>\r\n                <span>Don't have an account? </span>\r\n                <Link to=\"/register\">Register here</Link>\r\n            </div>\r\n          </Form.Item>\r\n        </Form>\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst styles = {\r\n  container: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n    height: \"100vh\",\r\n    justifyContent: \"center\",\r\n    background:\r\n      \"radial-gradient(circle, rgba(163,163,163,1) 100%, rgba(230,230,230,1) 100%, rgba(168,191,197,1) 100%, rgba(32,25,56,1) 100%, rgba(0,255,239,1) 100%)\",\r\n  },\r\n  card: {\r\n    width: \"30%\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    padding: \"20px\",\r\n    boxShadow: \"0 4px 8px rgba(0, 0, 0, 0.1)\",\r\n    borderRadius: \"8px\",\r\n  },\r\n  title: {\r\n    textAlign: \"center\",\r\n    marginBottom: \"30px\",\r\n    fontWeight: \"bold\",\r\n    fontSize: \"24px\",\r\n  },\r\n  form: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    justifyContent: \"center\",\r\n  },\r\n  submitButton: {\r\n    width: \"100px\",\r\n  },\r\n};\r\n\r\nexport default Login;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}